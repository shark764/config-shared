"use strict";!function(e){e.module("liveopsConfigPanel.shared.config",[]).value("liveopsConfigPanel.shared.config",{debug:!0}),e.module("liveopsConfigPanel.shared.directives",["liveopsConfigPanel.shared.services","liveopsConfigPanel.shared.filters"]),e.module("liveopsConfigPanel.shared.filters",[]),e.module("liveopsConfigPanel.shared.services",["toastr","ngLodash","ngResource","pascalprecht.translate","liveopsConfigPanel.shared.config"]),e.module("liveopsConfigPanel.shared",["liveopsConfigPanel.shared.config","liveopsConfigPanel.shared.directives","liveopsConfigPanel.shared.filters","liveopsConfigPanel.shared.services"])}(angular),angular.module("liveopsConfigPanel.shared.config").constant("apiHostname","http://localhost:9080").constant("BIRST_URL","http://dev-birst.liveopslabs.com").constant("SSO_PASSWORD","JO4IIiv0vuzyhoYoyWpbip0QquoCQyGh").constant("SPACE_ID","2846b565-23f8-4032-b563-21f8b7a01cc5").constant("helpDocsHostname","http://beta-help-docs.liveopslabs.com"),angular.module("liveopsConfigPanel.shared.config").constant("jsedn",window.jsedn).constant("preferenceKey","LIVEOPS-PREFERENCE-KEY").constant("sessionKey","LIVEOPS-SESSION-KEY").constant("uuidcacheKey","LIVEOPS-CACHE-KEY").factory("userStatuses",function(){return function(){return[{display:"Disabled",value:"disabled"},{display:"Enabled",value:"enabled"},{display:"Pending",value:"pending"}]}}).factory("statuses",function(){return function(){return[{display:"Disabled",value:!1},{display:"Enabled",value:!0}]}}).factory("ynStatuses",function(){return function(){return[{display:"No",value:!1},{display:"Yes",value:!0}]}}).factory("tenantStatuses",function(){return function(){return[{display:"Disabled",value:"disabled"},{display:"Expired Invitation",value:"expired"},{display:"Pending Invitation",value:"pending"},{display:"Accepted",value:"accepted"},{display:"Pending Acceptance",value:"invited"},{display:"Removed",value:"removed"}]}}).constant("userStates",[{display:"Busy",value:"busy"},{display:"Ready",value:"ready"},{display:"Not Ready",value:"not-ready"},{display:"Allocated",value:"allocated"},{display:"Offline",value:"offline"}]).constant("userRoles",[{value:"admin",display:"Admin"},{value:"user",display:"User"},{value:"other",display:"Other"}]),angular.module("liveopsConfigPanel.shared.filters").filter("hasPermission",["UserPermissions",function(e){return function(t){return angular.isArray(t)||(t=[t]),e.hasPermissionInList(t)}}]),angular.module("liveopsConfigPanel.shared.services").service("Alert",["toastr","$window",function(e,t){this.confirm=function(e,n,r){t.confirm(e)?n&&n():r&&r()},this.warning=function(){e.warning.apply(this,arguments)},this.success=function(){e.success.apply(this,arguments)},this.error=function(){e.error.apply(this,arguments)},this.info=function(){e.info.apply(this,arguments)}}]),angular.module("liveopsConfigPanel.mock",[]).value("mockRegions",[{id:"regionId1",description:"US East (N. Virginia)",name:"us-east-1"}]).value("mockLogin",{userId:"userId1",username:"username",platformPermissions:[],tenants:[]}).run(function(e,t,n,r,o){o.token="token1",o.tenant={tenantId:"tenant-id"},o.user={id:"userId1"},o.activeRegionId=n[0].id,e.when("GET",t+"/v1/regions").respond({result:n}),e.when("POST",t+"/v1/login").respond({result:r})}),angular.module("liveopsConfigPanel.shared.services").service("DirtyForms",["Alert","$translate",function(e,t){var n=this;this.forms=[],this.hasDirty=function(){var e=!1;return angular.forEach(n.forms,function(t){t.$dirty&&(e=!0)}),e},this.registerForm=function(e){n.forms.push(e)},this.removeForm=function(e){n.forms.removeItem(e)},this.confirmIfDirty=function(r){n.hasDirty()?e.confirm(t.instant("unsavedchanges.nav.warning"),r,angular.noop):r()}}]),function(){var e=function(e,t,n){return{seed:function(r,o){var i,s,a,l,u,c,d,p,f,m="10f15d80-0052-11e5-b68b-fb65b1fe22e1";return e.get("http://localhost:9080/v1/regions").then(function(t){return i=t.data.result[0].id,console.log("-- TITAN_REGION_ID --",i),e.post("http://localhost:9080/v1/login",{email:"titan@liveops.com",password:"gKVnfF9wrs6XPSYs"})}).then(function(t){return s=t.data.result.user.id,console.log("-- TITAN_ADMIN_ID --",s),e.post("http://localhost:9080/v1/users",{createdBy:s,email:r,password:o,firstName:"Test",lastName:"User",status:"enabled",externalId:"00000000-0000-0000-000000000000"})}).then(function(t){return a=t.data.result.id,l=t.data.result.email,console.log("-- CREATED_USER_ID --",a),console.log("-- CREATED_USER_EMAIL --",l),e.post("http://localhost:9080/v1/tenants",{adminUserId:a,createdBy:s,description:"This is a test tenant created by the seed service.",name:"Test Tenant",regionId:i})}).then(function(t){return u=t.data.result.id,console.log("-- CREATED TENANT ID --",u),e.post("http://localhost:9080/v1/tenants/"+u+"/invites",{roleId:m,email:l})}).then(function(i){return c=i.data.result.invitation.invitationToken,console.log("-- CREATED_INVITE_TOKEN --",c),console.log("-- LOG IN AS NEW USER --"),n(function(){t.login(r,o).then(function(){return e.get("http://localhost:9080/v1/tenants/"+u+"/invites/"+a+"/accept?token="+c)}).then(function(t){return f=t.data.result,console.log("-- ACCEPTED_INVITE_STATUS --",f),e.post("http://localhost:9080/v1/tenants/"+u+"/flows",{createdBy:a,description:"Test flow description.",name:"Test flow",tenantId:u,type:"customer"})}).then(function(t){return d=t.data.result.id,console.log("-- CREATED_FLOW_ID --",d),e.post("http://localhost:9080/v1/tenants/"+u+"/flows/"+d+"/versions",{createdBy:a,description:"Initial Version.",name:"v1",flowId:d,tenantId:u,flow:"[]"})}).then(function(e){p=e.data.result.version,console.log("-- CREATED VERSION ID --",p),console.log('\n\n Done seeding DB with all necessary data to access the flows screen. Log in as the user "'+r+'" with the password "'+o+'" and access the flows screen and go to town :)')})},5e3),t.login(r,o)})}}};angular.module("liveopsConfigPanel.shared.services").service("flowSetup",e)}(),Array.prototype.removeItem=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)},Array.prototype.clear=function(){this.splice(0,this.length)},Array.prototype.shuffle=function(){var e,t,n=this.length;if(0===n)return this;for(;--n;)e=Math.floor(Math.random()*(n+1)),t=this[n],this[n]=this[e],this[e]=t;return this},String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substring(e,this.length):t+this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)},String.prototype.contains||(String.prototype.contains=function(e){return this.indexOf(e)>-1}),angular.module("liveopsConfigPanel.shared.directives").directive("auditText",["$filter","TenantUser","Session",function(e,t,n){return{restrict:"AE",scope:{translation:"@",userId:"=",date:"="},template:"{{get()}}",link:function(r){r.get=function(){if(!r.userId)return e("translate")(r.translation,{date:e("date")(r.date,"medium")});var o=t.cachedGet({id:r.userId,tenantId:n.tenant.tenantId},"AuditTextUsers");return o.$resolved&&(r.text=e("translate")(r.translation,{displayName:o.getDisplay(),date:e("date")(r.date,"medium")})),r.text}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("autocomplete",["filterFilter","$timeout",function(e,t){return{restrict:"E",scope:{items:"=",nameField:"@",onSelect:"&",prefill:"=",isRequired:"=",placeholder:"@",hover:"=",keepExpanded:"=",onEnter:"&"},templateUrl:"liveops-config-panel-shared/directives/autocomplete/autocomplete.html",link:function(n){n.currentText=n.prefill||"",n.$watch("currentText",function(){var r;if(n.nameField){var o=n.filterCriteria={};o[n.nameField]=n.currentText,r=e(n.items,o,!0)}t(function(){n.onSelect({currentText:n.currentText})})}),n.select=function(e){n.hovering=!1,n.currentText=e.content},n.onBlur=function(){n.keepExpanded||(n.showSuggestions=!1)}}}}]),angular.module("liveopsConfigPanel.shared.directives").service("BulkAction",["$q",function(e){var t=function(){this.checked=!1};return t.prototype.reset=function(){this.checked=!1},t.prototype.apply=function(){},t.prototype.execute=function(t){var n=[],r=this;return angular.forEach(t,function(t){n.push(e.when(r.apply(t)))}),e.all(n)},t.prototype.canExecute=function(){return!0},t}]),angular.module("liveopsConfigPanel.shared.directives").directive("bulkActionExecutor",["$q","Alert","Modal","$translate","DirtyForms","$filter",function(e,t,n,r,o,i){return{restrict:"AE",replace:!0,scope:{items:"=",bulkActions:"=",showBulkActions:"=",dropOrderBy:"@",confirmMessageKey:"@"},transclude:!0,templateUrl:"liveops-config-panel-shared/directives/bulkActionExecutor/bulkActionExecutor.html",link:function(s){s.confirmMessageKey||(s.confirmMessageKey="bulkActions.confirm.message"),s.checkedItems=[],s.confirmExecute=function(){n.showConfirm({title:r.instant("bulkActions.confirm.title"),message:r.instant(s.confirmMessageKey,{numItems:s.selectedItems().length}),okCallback:s.execute})},s.closeBulk=function(){o.confirmIfDirty(function(){s.$emit("details:panel:close")})},s.execute=function(){var n=s.getSelectedBulkActions(s.bulkActions),o=[];s.bulkActionForm.$setUntouched(),s.bulkActionForm.$setPristine(),angular.forEach(n,function(t){if(t.canExecute()){var n=s.getSelectedBulkActions(s.items);o.push(e.when(t.execute(n)))}});var i=e.all(o).then(function(){t.success(r.instant("bulkAction.success")),s.resetForm()});return i},s.canExecute=function(){var e=s.getSelectedBulkActions(s.bulkActions),t=!!e.length;return 0===s.selectedItems().length?!1:(angular.forEach(e,function(e){t=t&&e.canExecute()}),t)},s.getSelectedBulkActions=function(e){var t=[];return angular.forEach(e,function(e){e.checked&&t.push(e)}),t},s.selectedItems=function(){if(s.checkedItems.clear(),angular.forEach(s.items,function(e){e.checked&&s.checkedItems.push(e)}),s.dropOrderBy){var e=i("orderBy")(s.checkedItems,s.dropOrderBy);s.checkedItems.clear(),s.checkedItems.push.apply(s.checkedItems,e)}return s.checkedItems},s.cancel=function(){o.confirmIfDirty(function(){s.bulkActionForm.$dirty?s.resetForm():s.closeBulk()})},s.resetForm=function(){s.bulkActionForm.$setUntouched(),s.bulkActionForm.$setPristine(),angular.forEach(s.bulkActions,function(e){e.reset()})},s.$watch("showBulkActions",function(e){e||s.resetForm()})}}}]),angular.module("liveopsConfigPanel.shared.directives.bulkAction.mock",["liveopsConfigPanel.mock"]).service("mockBulkActions",function(e){var t=[new e];return t[0].checked=!0,spyOn(t[0],"execute"),spyOn(t[0],"canExecute").and.returnValue(!0),t.push(new e),t[1].checked=!0,spyOn(t[1],"execute"),spyOn(t[1],"canExecute").and.returnValue(!1),t}),angular.module("liveopsConfigPanel.shared.directives").directive("compiledInclude",["$compile","$templateCache","$http","$q",function(e,t,n,r){return{restrict:"A",priority:400,compile:function(){return function(o,i,s){var a=s.compiledInclude,l=t.get(a);l||(l=n.get(a,{cache:t}).then(function(e){return t.put(a,e.data),e.data})),r.when(l).then(function(t){i.html(t),e(i.contents())(o)})}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loCancel",["$q",function(e){return{restrict:"A",require:["^loFormCancel"],link:function(t,n,r,o){r.event=angular.isDefined(r.event)?r.event:"click",n.bind(r.event,function(){var n=e.when(t.$eval(r.loCancel));n.then(function(){return o[0].cancel()}),t.$apply()})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loFormAlert",["$parse","Alert",function(e,t){return{restrict:"A",require:["loFormSubmit"],controller:function(){this.alertSuccess=function(e){var n=e.updated?"updated":"saved";t.success("Record "+n)},this.alertFailure=function(e){var n=e.updated?"update":"save";t.error("Record failed to "+n)}},link:function(e,t){e.$on("form:submit:success",function(e,n){var r=t.data("$loFormAlertController");r.alertSuccess(n)}),e.$on("form:submit:failure",function(e,n){var r=t.data("$loFormAlertController");r.alertFailure(n)})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loFormCancel",["$parse","DirtyForms","$timeout","$rootScope",function(e,t,n,r){return{restrict:"A",require:["ngResource","form","^loDetailsPanel"],controller:function(o){var i=this;this.resetForm=function(){angular.forEach(i.formController,function(e,t){if(e&&e.hasOwnProperty("$modelValue")&&e.$invalid){var n=e.$modelValue;null===n&&(n=void 0),i.formController[t].$setViewValue(n),i.formController[t].$rollbackViewValue()}}),i.formController.$setPristine(),i.formController.$setUntouched()},this.cancel=function(){var s=e(this.ngResource)(o);s.isNew()||!this.formController.$dirty?this.loDetailsPanelController.close():t.confirmIfDirty(function(){r.$broadcast("cancel:resource:"+s.resourceName),s.reset(),n(function(){i.resetForm(i.formController)})})}},link:function(t,n,r,o){t.$watch(r.ngResource,function(o,i){i&&i.reset();var s=e(r.name)(t),a=n.data("$loFormCancelController");a.resetForm(s)});var i=n.data("$loFormCancelController");i.ngResource=r.ngResource,i.formController=o[1],i.loDetailsPanelController=o[2]}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loFormReset",[function(){return{restrict:"A",require:"form",controller:function(){var e=this;this.resetForm=function(){angular.forEach(e.formController,function(t,n){if(t&&t.hasOwnProperty("$modelValue")&&t.$invalid){var r=t.$modelValue;null===r&&(r=void 0),e.formController[n].$setViewValue(r),e.formController[n].$rollbackViewValue()}}),e.formController.$setPristine(),e.formController.$setUntouched()}},link:function(e,t,n,r){var o=t.data("$loFormResetController");o.formController=r}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loFormSubmit",["$parse",function(e){return{restrict:"A",require:"form",controller:function(t){var n=this;n.errorInputWatchesUnbinds={},this.populateApiErrors=function(r){return e("data.error")(r)&&angular.forEach(r.data.error.attribute,function(e,r){angular.isDefined(n.formController[r])&&(n.formController[r].$setValidity("api",!1),n.formController[r].$error={api:e},n.formController[r].$setTouched(),n.formController[r].$setPristine(),n.errorInputWatchesUnbinds[r]=t.$watch(function(){return n.formController[r].$dirty},function(e){e&&(n.formController[r].$setValidity("api",!0),n.errorInputWatchesUnbinds[r](),delete n.errorInputWatchesUnbinds[r])}))}),r}},link:function(e,t,n,r){var o=t.data("$loFormSubmitController");o.formController=r}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loSubmit",["$q","$parse",function(e,t){return{restrict:"A",require:["^loFormSubmit","?^loFormCancel","?^loFormAlert","?^loFormReset"],link:function(n,r,o,i){o.event=angular.isDefined(o.event)?o.event:"click";var s=i[0],a=i[1],l=i[2],u=i[3];r.bind(o.event,function(){var r=t(o.ngDisabled)(n);if(!r){var i=e.when(n.$eval(o.loSubmit));i=i.then(function(e){return a?a.resetForm():u&&u.resetForm(),e},function(t){var n=e.defer();return s.populateApiErrors(t),n.reject(t),n.promise}),i=i.then(function(e){l.alertSuccess(e)},function(e){l.alertFailure(e.config.data)}),n.$apply()}})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("disableContents",[function(){return{compile:function(e,t){var n="input, button, select, textarea, label",r=e.find(n);angular.forEach(r,function(e){e=angular.element(e);var n=e.attr("ng-disabled");n=n?n+" || ":"",n+=t.disableContents,e.attr("ng-disabled",n)})}}}]),angular.module("liveopsConfigPanel.shared.directives").controller("DropdownController",["$scope","$document","$element",function(e,t,n){var r=this;e.showDrop=!1,this.setShowDrop=function(t){e.showDrop=t},e.$watch("showDrop",function(e,n){t.off("click",r.onClick),e&&!n&&t.on("click",r.onClick)}),this.onClick=function(o){var i=n.find(o.target).length>0;i||(e.$apply(function(){e.showDrop=!1,e.hovering=!1}),t.off("click",r.onClick))}}]),angular.module("liveopsConfigPanel.shared.directives").directive("dropdown",[function(){return{scope:{items:"=",label:"@",valuePath:"@",displayPath:"@",collapseIcon:"@",expandIcon:"@",orderBy:"@",hovering:"=?",hoverTracker:"=?",showOnHover:"="},templateUrl:"liveops-config-panel-shared/directives/dropdown/dropdown.html",controller:"DropdownController",link:function(e,t,n,r){e.valuePath=e.valuePath?e.valuePath:"value",e.displayPath=e.displayPath?e.displayPath:"label","undefined"!=typeof e.hovering&&e.hoverTracker&&e.hoverTracker.push(r),e.clearOtherHovers=function(){angular.forEach(e.hoverTracker,function(e){e!==r&&e.setShowDrop(!1)})},e.orderBy||(e.orderBy="label"),e.optionClick=function(t){e.showDrop=!1,e.hovering=!1,t()},e.collapseIcon||(e.collapseIcon="fa fa-caret-up"),e.expandIcon||(e.expandIcon="fa fa-caret-down"),e.mouseIn=function(){(e.hovering||e.showOnHover)&&(e.showDrop=!0,e.clearOtherHovers())},e.dropClick=function(){e.showDrop=!e.showDrop,e.hovering=!e.hovering}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("filterDropdown",[function(){return{scope:{id:"@",options:"=",valuePath:"@",displayPath:"@",label:"@",showAll:"@",orderBy:"@"},templateUrl:"liveops-config-panel-shared/directives/dropdown/filterDropdown.html",controller:"DropdownController",link:function(e,t){if(t.parent().css("overflow","visible"),e.valuePath=e.valuePath?e.valuePath:"value",e.displayPath=e.displayPath?e.displayPath:"display",e.checkItem=function(t){t.checked=!t.checked,e.$emit("dropdown:item:checked",t)},e.showAll){e.$watch("options",function(){var t=!1;angular.forEach(e.options,function(n){n.checked&&(t=!0,e.all.checked=!1)}),t||(e.all.checked=!0)},!0);var n=!0;angular.forEach(e.options,function(e){n=n&&e.checked}),e.all={checked:n},e.$watch("all.checked",function(){e.all.checked&&angular.forEach(e.options,function(e){e.checked=!1})})}else e.$watch("options",function(){angular.forEach(e.options,function(e){e.checked="undefined"==typeof e.checked?!0:e.checked})})}}}]),angular.module("liveopsConfigPanel.shared.directives").controller("EditFieldController",function(e){e.saveHandler=function(t){t&&t.target.blur(),e.$emit("editField:save",{objectId:e.objectId,fieldName:e.name,fieldValue:e.ngModel})},e.$on(e.name+":save",function(){e.edit=!1})}),angular.module("liveopsConfigPanel.shared.directives").directive("formError",function(){return{templateUrl:"liveops-config-panel-shared/directives/formError/formError.html",scope:{field:"="},link:function(e,t,n){e.errorTypes={},angular.forEach(n.$attr,function(t,r){if(r.match(/errorType+/)){var o=r.replace(/errorType/,""),i=o.charAt(0);o=o.replace(/^\w/,i.toLowerCase()),e.errorTypes[o]=n[r],n.$observe(r,function(t){e.errorTypes[o]=t})}}),e.isString=function(e){return angular.isString(e)}}}}),angular.module("liveopsConfigPanel.shared.directives").directive("helpIcon",["$document","$compile",function(e,t){return{templateUrl:"liveops-config-panel-shared/directives/helpIcon/helpIcon.html",scope:{text:"@",translateValue:"@"},link:function(n,r){n.target=r;var o;n.showTooltip=function(){o=t('<tooltip target="target" text="{{text}}" translate-value="{{translateValue}}"></tooltip>')(n),e.find("body").append(o)},n.destroyTooltip=function(){o.remove()}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("highlightOnClick",["$window",function(e){return{restrict:"A",link:function(t,n){n.on("click",function(){e.getSelection().toString()||this.setSelectionRange(0,this.value.length)})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loMultibox",["$timeout",function(e){return{restrict:"E",scope:{items:"=",selectedItem:"=",resourceName:"@",name:"@",onItemSelect:"="},templateUrl:"liveops-config-panel-shared/directives/loMultibox/loMultibox.html",controller:"DropdownController",link:function(t,n,r,o){t.onSelect=function(e){angular.isString(e)||(t.display=e.getDisplay(),angular.isFunction(t.onItemSelect)&&t.onItemSelect(e),o.setShowDrop(!1),t.createMode=!1)},t.createItem=function(){t.$emit("resource:details:create:"+t.resourceName,t.selectedItem),t.createMode=!0},t.labelClick=function(){o.setShowDrop(!t.showDrop),t.selectedItem=null,t.showDrop&&e(function(){var e=n.find("type-ahead input");e.focus()})},t.$watch("selectedItem",function(e){angular.isString(e)||e&&angular.isFunction(e.getDisplay)&&(t.display=e.getDisplay())},!0),t.$on("resource:details:"+t.resourceName+":canceled",function(){t.createMode=!1}),t.$on("created:resource:"+t.resourceName,function(e,n){t.createMode&&t.onSelect(n)})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loSubmitSpinner",[function(){return{scope:{loSubmitSpinnerStatus:"&"},link:function(e,t){e.spinnerElement=angular.element('<a disabled="true"><i class="fa fa-refresh fa-spin"></i></a>'),e.spinnerElement.addClass(t[0].className),e.spinnerElement.addClass("ng-hide"),t.after(e.spinnerElement),e.$watch("loSubmitSpinnerStatus()",function(n){angular.isDefined(n)&&(t.toggleClass("ng-hide",n),e.spinnerElement.toggleClass("ng-hide",!n))})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loValidate",[function(){return{require:"ngModel",link:function(e,t,n,r){function o(){angular.extend(r.$disabledValidators,r.$validators),r.$validators={},angular.extend(r.$disabledFormatters,r.$formatters),r.$formatters={};for(var e in r.$disabledValidators)r.$setValidity(e,!0)}function i(){angular.extend(r.$validators,r.$disabledValidators),r.$disabledValidators={},angular.extend(r.$formatters,r.$disabledFormatters),r.$disabledFormatters={}}r.$disabledValidators={},r.$disabledFormatters={},e.$watch(n.loValidate,function(e){e?i():o()},!0)}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("loading",[function(){return{restrict:"E",templateUrl:"liveops-config-panel-shared/directives/loading/loading.html"}}]),angular.module("liveopsConfigPanel.shared.directives").directive("modal",[function(){return{restrict:"E",templateUrl:"liveops-config-panel-shared/directives/modal/modal.html"}}]),angular.module("liveopsConfigPanel.shared.directives").directive("ngResource",[function(){return{restrict:"A",controller:function(){}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("numberSlider",["$timeout",function(e){return{restrict:"E",scope:{value:"=",minValue:"@",maxValue:"@",hasHandles:"=",placeholder:"@",ngChanged:"&"},templateUrl:"liveops-config-panel-shared/directives/numberSlider/numberSlider.html",link:function(t,n){t.minValue=t.minValue?Number(t.minValue):null,t.maxValue=t.maxValue?Number(t.maxValue):null,t.$watch("value",function(){t.value&&("string"==typeof t.value&&(t.value=Number(t.value.replace(/[^0-9\\.\\-]/g,""))),null!==t.maxValue&&t.value>t.maxValue&&(t.value=t.maxValue),null!==t.minValue&&t.value<t.minValue&&(t.value=t.minValue),t.ngChanged(t.value))}),t.increment=function(){return t.value?void((null===t.maxValue||t.value<t.maxValue)&&(t.value=Number(t.value)+1,t.ngChanged())):(t.value=t.minValue?t.minValue:0,void t.ngChanged())},t.decrement=function(){return t.value?void((null===t.minValue||t.value>t.minValue)&&(t.value=Number(t.value)-1,t.ngChanged())):(t.value=t.minValue?t.minValue:0,void t.ngChanged())},n.find("input").bind("keydown keypress",function(n){40===n.which?(e(t.decrement),n.preventDefault()):38===n.which&&(e(t.increment),n.preventDefault())})}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("resizeHandle",["$window","$document","$rootScope","lodash",function(e,t,n,r){return{restrict:"E",scope:{leftElementId:"@",rightElementId:"@"},templateUrl:"liveops-config-panel-shared/directives/resizeHandle/resizeHandle.html",link:function(e,o){function i(t){var n=e.leftTargetElement[0].offsetWidth,r=e.rightTargetElement[0].offsetWidth,o=e.leftTargetElement[0].getBoundingClientRect(),i=o.left,s=t.pageX;s-=i,e.resizeElements(n,r,s)}o.addClass("resize-pane"),e.leftTargetElement=angular.element($("#"+e.leftElementId)),e.rightTargetElement=angular.element($("#"+e.rightElementId)),o.on("mousedown",function(n){2!==n.button&&(n.preventDefault(),t.on("mousemove",i),t.on("mouseup",e.mouseup))}),e.resizeElements=function(t,n,r){var o=t-r,i=t-o,s=n+o,a=parseInt(e.leftTargetElement.css("min-width")),l=parseInt(e.rightTargetElement.css("min-width"));if(!(l>s||a>i)){e.leftTargetElement.css("width",i+"px"),e.rightTargetElement.css("width",s+"px");var u={leftWidth:i,rightWidth:s};e.sendResizeEvent(u),e.applyClasses(u,e.leftTargetElement,"leftWidth"),e.applyClasses(u,e.rightTargetElement,"rightWidth")}},e.sendResizeEvent=r.throttle(function(e){n.$broadcast("resizehandle:resize",e)},500),e.applyClasses=function(e,t,n){e[n]>700?t.addClass("two-col"):t.removeClass("two-col"),e[n]<450?t.addClass("compact-view"):t.removeClass("compact-view")},e.mouseup=function(){t.unbind("mousemove",i),t.unbind("mouseup",e.mouseup)}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("scrollTable",[function(){return{restrict:"A",replace:"true",compile:function(e){e.removeAttr("scroll-table");var t=e.find("thead").height();0===t&&(t=35);var n=e.find("thead").clone(!0,!0);n.find("th").css("height",t+"px");var r=angular.element('<table class="clone-header">'+n[0].outerHTML+"</table>"),o=e[0].className;return r.addClass(o),e.find("thead").find("input").remove(),e.replaceWith('<div class="scrollable-table-container" style="padding-top:'+t+'px;">'+r[0].outerHTML+'<div class="table-wrapper"><div>'+e[0].outerHTML+"</div></div></div>"),function(e,n,r){r.maxHeight&&e.$watch(function(){return n.find("tbody").find("tr").length},function(e){if(e>0){var o=t*e;o<r.maxHeight?n.css("height",o+t+5+"px"):n.css("height",r.maxHeight+"px")}})}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("separateValidation",[function(){return{restrict:"A",require:"?form",link:function(e,t,n,r){if(r){var o=t.parent().controller("form");o&&o.$removeControl(r);var i={$setValidity:function(){r.$invalid=!1,angular.forEach(t.find("input"),function(e){if(r[e.name]&&r[e.name].$error)for(var t in r[e.name].$error)if(t&&r[e.name].$error[t]){r.$invalid=!0;break}})},$setDirty:function(){r.$dirty=!0},$setPristine:function(e){r.$pristine=e}};angular.extend(r,i)}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("singleElementResizeHandle",["$window","$document","$rootScope","lodash",function(e,t,n,r){return{restrict:"E",scope:{elementId:"@",minWidth:"@",maxWidth:"@"},templateUrl:"liveops-config-panel-shared/directives/singleElementResizeHandle/singleElementResizeHandle.html",link:function(o,i){function s(t){var n=o.targetElement[0].offsetWidth,r=t.pageX,i=e.innerWidth;o.resizeElement(n,i,r)}o.targetElement=angular.element(document.getElementById(o.elementId)),i.on("mousedown",function(){2!==event.button&&(event.preventDefault(),t.on("mousemove",s),t.on("mouseup",o.mouseup))}),o.applyClasses=function(e,t){e>700?t.addClass("two-col"):t.removeClass("two-col"),450>e?t.addClass("compact-view"):t.removeClass("compact-view")},o.mouseup=function(){t.unbind("mousemove",s),t.unbind("mouseup",o.mouseup)},o.sendResizeEvent=r.throttle(function(e){n.$broadcast("resizehandle:resize",e)},500),o.resizeElement=function(e,t,n){var r=t-n;r<o.minWidth||r>o.maxWidth||(o.targetElement.css("width",r+"px"),o.sendResizeEvent(r),o.applyClasses(r,o.targetElement))}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("confirmToggle",["Modal","$timeout",function(e,t){return{require:["ngModel","^toggle"],link:function(n,r,o,i){i[0].$parsers.push(function(e){return n.onToggle(e)}),n.onToggle=function(r){return t(function(){n.$parent.ngModel=r===n.trueValue?n.falseValue:n.trueValue}),e.showConfirm({message:r===n.trueValue?n.confirmEnableMessage:n.confirmDisableMessage}).then(function(){n.$parent.ngModel=r})}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("toggle",[function(){return{templateUrl:"liveops-config-panel-shared/directives/toggle/toggle.html",scope:{ngModel:"=",ngDisabled:"=",name:"@",trueValue:"@",falseValue:"@",confirmEnableMessage:"@",confirmDisableMessage:"@"},controller:function(e){angular.isUndefined(e.trueValue)&&(e.trueValue=!0),angular.isUndefined(e.falseValue)&&(e.falseValue=!1),angular.isDefined(e.confirmEnableMessage)&&angular.isDefined(e.confirmDisableMessage)&&(e.confirmOnToggle=!0)}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("tooltip",["$document","$timeout",function(e,t){return{templateUrl:"liveops-config-panel-shared/directives/tooltip/tooltip.html",scope:{text:"@",target:"=",translateValue:"@"},link:function(n,r){n.targetPosition=n.target.offset(),n.tooltipWidth=0,n.tooltipHeight=0,n.setPosition=function(){r.find("div").removeClass("top left right bottom"),n.tooltipWidth=r.outerWidth(),n.tooltipHeight=r.outerHeight();var e=n.getPositionClass(),t=n.getAbsolutePosition(e);r.find("div").addClass(e),r.css("left",t.left),r.css("top",t.top)},n.getPositionClass=function(){var t,r=e.width(),o=e.height(),i=n.targetPosition.top,s=n.targetPosition.left;return t=i-n.tooltipHeight<0?s-n.tooltipWidth<0?"bottom right":s+n.tooltipWidth>r?"bottom left":"bottom center":i+n.tooltipHeight>o?s-n.tooltipWidth<0?"top right":s+n.tooltipWidth>r?"top left":"top center":s-n.tooltipWidth<0?"center right":s+n.tooltipWidth>r?"center left":"top center"},n.getAbsolutePosition=function(e){var t=15,r=13,o=25,i=n.target.outerHeight(),s=n.target.outerWidth(),a=n.targetPosition.left,l=n.targetPosition.top;return e.indexOf("left")>-1&&(a+=-n.tooltipWidth-r),e.indexOf("right")>-1&&(a+=s+r),"bottom center"===e?(l+=i+t,a+=-((n.tooltipWidth-s)/2)):"top center"===e?(l+=-(n.tooltipHeight+t),a+=-((n.tooltipWidth-s)/2)):"top right"===e||"top left"===e?l+=-n.tooltipHeight+o:("center right"===e||"center left"===e)&&(l+=-(n.tooltipHeight/2)+i/2),{top:l,left:a}},t(n.setPosition,1)}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("typeAhead",["$filter","$timeout",function(e,t){return{restrict:"E",scope:{items:"=",nameField:"@",onSelect:"&",placeholder:"@",prefill:"=",keepExpanded:"=",onEnter:"&",filters:"=?",selectedItem:"=?"},templateUrl:"liveops-config-panel-shared/directives/typeAhead/typeAhead.html",controller:function(t){var n=this;t.currentText=t.prefill||"",this.defaultTextFilter=function(e,t){return e.getDisplay().toLowerCase().contains(t.toLowerCase())},t.filterCriteria=function(e){if(t.filterArray){for(var n=!0,r=0;r<t.filterArray.length;r++){var o=t.filterArray[r];n=n&&o.call(o,e,t.currentText,t.items)}return n}},t.$watch("filters",function(e){t.filterArray=[],e&&angular.isArray(e)?t.filterArray=angular.copy(e):e&&!angular.isArray(e)&&(t.filterArray=[e]),t.filterArray.push(n.defaultTextFilter)},!0),t.updateHighlight=function(){var n=e("filter")(t.items,t.filterCriteria,!0);if(""===t.currentText)t.highlightedItem=null,t.selectedItem=null;else if(n&&n.length>0){var r=n.indexOf(t.highlightedItem);0>r&&(t.highlightedItem=null,t.selectedItem=t.currentText),angular.isDefined(n[0].getDisplay)&&n[0].getDisplay()===t.currentText?(t.highlightedItem=n[0],t.selectedItem=n[0]):(t.highlightedItem=n[0],t.selectedItem=t.currentText)}else t.highlightedItem=null,t.selectedItem=t.currentText},t.$watch("currentText",function(){t.updateHighlight()}),t.$watch("selectedItem",function(e){null===e&&(t.currentText="")}),t.$watch("items",function(e){angular.isDefined(e)&&t.updateHighlight()},!0),t.select=function(e){angular.isString(e)||(t.currentText=angular.isDefined(e.getDisplay)?e.getDisplay():e[t.nameField]),t.selectedItem=e,t.onSelect({selectedItem:e}),t.keepExpanded||(t.hovering=!1,t.showSuggestions=!1)},t.onBlur=function(){t.keepExpanded||(t.showSuggestions=!1)},t.orderByFunction=function(e){var n=e.getDisplay();return n?n:e[t.nameField]}},link:function(e,n){n.find("input").bind("keydown keypress",function(r){var o;13===r.which?(t(function(){var t=e.highlightedItem?e.highlightedItem:e.currentText;e.select(t),e.onEnter({item:t})}),r.preventDefault()):40===r.which?(o=e.filtered.indexOf(e.highlightedItem),o+1<e.filtered.length&&t(function(){e.highlightedItem=e.filtered[o+1];var t=n.find("li:nth-child("+(o+2)+")");e.showListElement(t)})):38===r.which&&(o=e.filtered.indexOf(e.highlightedItem),o-1>=0&&t(function(){e.highlightedItem=e.filtered[o-1];var t=n.find("li:nth-child("+o+")");e.showListElement(t)
}))}),e.showListElement=function(e){var t=e.get(0).offsetTop,r=e.get(0).offsetHeight,o=t+r,i=n.find("ul").get(0).offsetHeight,s=n.find("ul").get(0).scrollTop;o>s+i?n.find("ul").get(0).scrollTop=o-i:s>t&&(n.find("ul").get(0).scrollTop=t)}}}}]),angular.module("liveopsConfigPanel.shared.directives").directive("uuid",[function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$validators.uuid=function(e,t){return r.$isEmpty(e)?!0:/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t)?!0:!1}}}}]),angular.module("liveopsConfigPanel.shared.filters").filter("hasPermission",["UserPermissions",function(e){return function(t){return angular.isArray(t)||(t=[t]),e.hasPermissionInList(t)}}]),angular.module("liveopsConfigPanel.shared.filters").filter("keysCount",[function(){return function(e){return Object.keys(e).length}}]),angular.module("liveopsConfigPanel.shared.filters").filter("matchesField",["$filter",function(e){return function(t,n,r){var o=function(t,n,r){if(!(angular.isUndefined(t)||angular.isUndefined(n)||""===n||angular.isUndefined(r))){var i=n.indexOf(":");if(i>-1){var s=n.substring(0,i),a=n.substring(i+1);return o(t[s],a,r)?t:void 0}if(angular.isArray(t)){for(var l=0;l<t.length;l++)if(t[l][n]===r)return t}else if(e("parse")(t,n)===r)return t}};return o(t,n,r)}}]),angular.module("liveopsConfigPanel.shared.filters").filter("objectNegation",function(){return function(e,t,n,r){var o=[];return angular.forEach(e,function(e){for(var i=!0,s=0;s<n.length;s++){var a=n[s];if(e[t]===a[r]){i=!1;break}}i&&o.push(e)}),o}}),angular.module("liveopsConfigPanel.shared.filters").filter("invoke",[function(){return function(e,t){return angular.isFunction(e)?e.call(t):e}}]),angular.module("liveopsConfigPanel.shared.filters").filter("parse",["$parse",function(e){return function(t,n){return e(n)(t)}}]),angular.module("liveopsConfigPanel.shared.filters").filter("search",["$parse",function(e){return function(t,n,r){function o(e){return e.replace(/([.+?^=!:${}()|\[\]\/\\])/g,"\\$1"),e.replace(/([*])/g,".*")}if(!n||!r)return t;var i=function(t,n){var r=[],o=e(t.path),s=o(n);return"string"==typeof s?r=[s]:"object"==typeof s&&angular.forEach(o(n),function(e){r="inner"in t?r.concat(i(t.inner,e)):[e]}),r},s=[];return angular.forEach(t,function(t){var a=new RegExp(o(r),"i"),l="";angular.forEach(n,function(n){"string"==typeof n?l+=e(n)(t)+" ":"object"==typeof n&&(l+=i(n,t).join(" ")+" ")}),a.test(l)&&s.push(t)}),s}}]),angular.module("liveopsConfigPanel.shared.filters").filter("selectedOptions",["$filter",function(e){return function(t,n){var r=[],o=e("invoke")(n.options);return angular.forEach(t,function(t){var i=!1;angular.forEach(o,function(o){var s=e("invoke")(o.value,o);!i&&o.checked&&e("matchesField")(t,n.name,s)&&(r.push(t),i=!0)})}),r}}]),angular.module("liveopsConfigPanel.shared.filters").filter("selectedTableOptions",["$parse","$filter",function(e,t){return function(n,r){var o=[];if(angular.isUndefined(n))return o;for(var i=!0,s=0;s<n.length;s++){for(var a=n[s],l=!0,u=0;u<r.length;u++){var c=!0,d=r[u];if(e("header.options")(d)){for(var p=d.lookup?d.lookup:d.name,f=t("invoke")(d.header.options),m=0;m<f.length;m++){var h=f[m];if(i=i&&!h.checked,h.checked){var g=e(d.header.valuePath?d.header.valuePath:"value"),v=t("invoke")(g(h),h);if(t("matchesField")(a,p,v)){c=!0;break}c=!1}}l=l&&c}}l&&o.push(a)}return i?n:o}}]),angular.module("liveopsConfigPanel.shared.services").service("Alert",["toastr","$window",function(e,t){this.confirm=function(e,n,r){t.confirm(e)?n&&n():r&&r()},this.warning=function(){e.warning.apply(this,arguments)},this.success=function(){e.success.apply(this,arguments)},this.error=function(){e.error.apply(this,arguments)},this.info=function(){e.info.apply(this,arguments)}}]),angular.module("liveopsConfigPanel.shared.services").service("Session",["$rootScope","sessionKey","preferenceKey","$translate","$filter",function(e,t,n,r,o){var i=this;this.userSessionKey=t,this.userPreferenceKey=n,this.token=null,this.user=null,this.lang=null,this.tenants=null,this.tenant=null,this.activeRegionId=null,this.columnPreferences={},this.platformPermissions=null,this.set=function(e,t,n,r){this.token=n,this.setUser(e),this.setTenants(t),this.setPlatformPermissions(r),this.flush()},this.setTenants=function(e){if(this.tenants=e&&e.length>0?e:[{tenantId:"",name:r.instant("session.tenants.none")}],this.tenant){var t=o("filter")(this.tenants,{tenantId:this.tenant.tenantId});this.tenant=t.length>0?t[0]:this.tenants[0]}else this.tenant=this.tenants[0];this.flush()},this.setUser=function(e){this.user={id:e.id,displayName:e.getDisplay(),email:e.email},this.flush()},this.setToken=function(e){this.token=e,this.flush()},this.setPlatformPermissions=function(e){this.platformPermissions=e,this.flush()},this.setColumnPreferences=function(e){this.columnPreferences=e,this.flush()},this.destroy=function(){this.token=null,this.user=null,this.tenants=null,this.platformPermissions=null,localStorage.removeItem(this.userSessionKey)},this.setTenant=function(e){i.tenant={tenantId:e.tenantId,tenantName:e.tenantName,tenantPermissions:e.tenantPermissions},i.flush()},this.destroyAll=function(){this.destroy(),this.activeRegionId=null,this.lang="en",this.tenant=null,localStorage.removeItem(this.userPreferenceKey)},this.restore=function(){angular.extend(this,JSON.parse(localStorage.getItem(this.userSessionKey))),angular.extend(this,JSON.parse(localStorage.getItem(this.userPreferenceKey)))},this.isAuthenticated=function(){return this.token?this.token.indexOf("Token")<0:!1},this.flush=function(){localStorage.setItem(i.userSessionKey,JSON.stringify({token:i.token,user:i.user,tenants:i.tenants,platformPermissions:i.platformPermissions})),localStorage.setItem(i.userPreferenceKey,JSON.stringify({lang:i.lang,activeRegionId:i.activeRegionId,tenant:i.tenant,columnPreferences:i.columnPreferences}))},this.restore()}]),angular.module("liveopsConfigPanel.shared.services").service("cacheAddInterceptor",["queryCache",function(e){this.response=function(t){var n=Object.getPrototypeOf(t.resource),r=t.resource.cacheKey?t.resource.cacheKey():n.resourceName;return e.get(r)||e.put(r,[]),e.get(r).push(t.resource),t.resource}}]),angular.module("liveopsConfigPanel.shared.services").service("cacheRemoveInterceptor",["queryCache",function(e){this.response=function(t){var n=Object.getPrototypeOf(t.resource),r=t.resource.cacheKey?t.resource.cacheKey():n.resourceName;return e.get(r)&&e.get(r).removeItem(t.resource),t.resource}}]),angular.module("liveopsConfigPanel.shared.services").service("emitInterceptor",["$rootScope","$q","$location","apiHostname",function(e,t,n,r){this.response=function(t){var n=t.config.url.replace(r+"/v1",""),o=n.replace(/\//g,":"),i=Object.getPrototypeOf(t.resource);return 201===t.status?(e.$broadcast("created:resource:"+i.resourceName,t.resource),e.$broadcast("created:resource"+o,t.resource)):200===t.status&&(o=o.replace(/:[-\w]+$/,""),e.$broadcast("updated:resource:"+i.resourceName,t.resource),e.$broadcast("updated:resource"+o,t.resource)),t.resource}}]),angular.module("liveopsConfigPanel.shared.services").factory("LiveopsResourceFactory",["$http","$resource","$q","queryCache","lodash",function(e,t,n,r,o){function i(e){return e.result?e.result:e}function s(e,t){return o.startsWith(e,"$")?void 0:t}function a(e){if(angular.isArray(e)){var t=function(t){return angular.forEach(e,function(e){e.response(t)}),t.resource},n={response:t};return n}return e}function l(e,t){return o.startsWith(e,"$")?void 0:t}return{create:function(n){function u(e){var t=angular.copy(e);return angular.forEach(t,function(e,r){var i=o.findIndex(n.updateFields,{name:r});(0>i||null===e&&n.updateFields[i].optional)&&delete t[r]}),t}function c(e){var t=u(e);return JSON.stringify(t,l)}function d(e){return JSON.stringify(e,s)}n.requestUrlFields=angular.isDefined(n.requestUrlFields)?n.requestUrlFields:{id:"@id",tenantId:"@tenantId",groupId:"@groupId",flowId:"@flowId",queueId:"@queueId",userId:"@userId",memberId:"@memberId"};var p=Array.prototype.concat(e.defaults.transformResponse,i),f=n.getRequestTransformer,m=n.getResponseTransformer?Array.prototype.concat(n.getResponseTransformer,p):p,h=n.queryRequestTransformer,g=n.queryResponseTransformer?Array.prototype.concat(n.queryResponseTransformer,p):p,v=n.putRequestTransformer?Array.prototype.concat(n.putRequestTransformer,c):c,I=n.putResponseTransformer?Array.prototype.concat(n.putRequestTransformer,p):p,y=n.postRequestTransformer?Array.prototype.concat(n.postRequestTransformer,d):d,k=n.postResponseTransformer?Array.prototype.concat(n.postResponseTransformer,p):p,w=n.deleteRequestTransformer,$=n.deleteResponseTransformer?Array.prototype.concat(n.deleteResponseTransformer,p):p,C={"Content-Type":"application/json"},P=t(n.endpoint,n.requestUrlFields,{query:{method:"GET",isArray:!0,headers:C,transformRequest:h,transformResponse:g,interceptor:a(n.queryInterceptor)},get:{method:"GET",headers:C,transformRequest:f,transformResponse:m,interceptor:a(n.getInterceptor)},update:{method:"PUT",headers:C,transformRequest:v,transformResponse:I,interceptor:a(n.updateInterceptor)},save:{method:"POST",headers:C,transformRequest:y,transformResponse:k,interceptor:a(n.saveInterceptor)},"delete":{method:"DELETE",headers:C,transformRequest:w,transformResponse:$,interceptor:a(n.saveInterceptor)}});P.prototype.resourceName=n.resourceName,P.prototype.$$backupSudoProperties=function(){var e={};return angular.forEach(this,function(t,n){n.match(/^\$[^$].*/g)&&!angular.isFunction(t)&&["$original","$busy","$resolved"].indexOf(n)<0&&(e[n]=t)}),e},P.prototype.$$restoreSudoProperties=function(e,t){angular.forEach(t,function(t,n){e[n]?angular.isObject(t)&&angular.extend(e[n],t):e[n]=t})};var E=P.get;P.get=function(e,t,n){var r=E.call(this,e,t,n);return r.$promise.then(function(e){return e.$original=angular.copy(e),e}),r};var T=P.query;P.query=function(e,t,n){var r=T.call(this,e,t,n);return r.$promise.then(function(e){return angular.forEach(e,function(e){e.$original=angular.copy(e)}),e}),r};var b=P.prototype.$save;P.prototype.$save=function(e,t,n){var r=b.call(this,e,t,n);return r.then(function(e){return e.$original=angular.copy(e),e}),r};var S=P.prototype.$update;return P.prototype.$update=function(e,t,n){var r=S.call(this,e,t,n);return r.then(function(e){return e.$original=angular.copy(e),e}),r},P.cachedGet=function(e,t,n){var i=t?t:this.prototype.resourceName,s=r.get(i);(!s||n)&&(r.put(i,[]),s=r.get(i));var a=o.find(s,e);if(!a){a=this.get(e);for(var l in e)a[l]=e[l];s.push(a)}return a},P.cachedQuery=function(e,t,n){var o=t?t:this.prototype.resourceName;if(!r.get(o)||n){var i=this.query(e);return r.put(o,i),i}return r.get(o)},P.prototype.save=function(e,t,n){var r=this,o=this.isNew()?this.$save:this.$update;r.$busy=!0;var i=this.$$backupSudoProperties();return o.call(r,e,t,n).then(function(e){return r.$original=angular.copy(e),r.$original&&r.$original.$original&&delete r.$original.$original,r.$$restoreSudoProperties(e,i),e})["finally"](function(){r.$busy=!1})},P.prototype.reset=function(){for(var e in this.$original)e.match(/^\$.*/g)||angular.isFunction(this.$original[e])||(this[e]=angular.copy(this.$original[e]))},P.prototype.getDisplay=function(){return this.toString()},P.prototype.isNew=function(){return!(this.hasOwnProperty("created")||angular.isDefined(this.id))},P.prototype.$busy=!1,P}}}]),angular.module("liveopsConfigPanel.shared.services").factory("queryCache",["$cacheFactory",function(e){return e("queryCache")}]),angular.module("liveopsConfigPanel.shared.services").service("Modal",["$document","$rootScope","$compile","$q",function(e,t,n,r){var o=this;this.showConfirm=function(i){var s={title:"",message:"",okCallback:angular.noop,cancelCallback:angular.noop},a=r.defer(),l=angular.extend(s,i),u=t.$new();u.modalBody="app/shared/services/modal/confirmModal.html",u.title=l.title,u.message=l.message,u.okCallback=function(){o.close(),a.resolve("true"),l.okCallback()},u.cancelCallback=function(){o.close(),a.reject("false"),l.cancelCallback()};var c=n("<modal></modal>")(u);return e.find("body").append(c),a.promise},this.close=function(){e.find("modal").remove()}}]),angular.module("liveopsConfigPanel.shared.directives").directive("editFieldDropDown",function(){return{restrict:"E",transclude:!0,templateUrl:"liveops-config-panel-shared/directives/editField/dropDown/editField_DropDown.html",scope:{ngModel:"=",save:"=",objectId:"=",defaultText:"@",name:"@",label:"@",placeholder:"@"},controller:"EditFieldController"}}),angular.module("liveopsConfigPanel.shared.directives").directive("editField",function(){return{restrict:"E",templateUrl:"liveops-config-panel-shared/directives/editField/input/editField_input.html",scope:{ngModel:"=",save:"=",objectId:"=",name:"@",label:"@",type:"@",placeholder:"@"},controller:"EditFieldController"}}),angular.module("liveopsConfigPanel.tenant.group.mock",["liveopsConfigPanel.mock"]).service("mockGroups",function(e){return[new e({id:"groupId1",name:"groupName1",tenantId:"tenant-id"}),new e({id:"groupId2",name:"groupName2",tenantId:"tenant-id"}),new e({id:"groupId3",name:"groupName3",tenantId:"tenant-id"}),new e({id:"groupId100",name:"groupName100",description:"Does not exist yet!",tenantId:"tenant-id"})]}).run(["$httpBackend","apiHostname","mockGroups",function(e,t,n){e.when("GET",t+"/v1/tenants/tenant-id/groups/groupId1").respond({result:n[0]}),e.when("GET",t+"/v1/tenants/tenant-id/groups/groupId2").respond({result:n[1]}),e.when("GET",t+"/v1/tenants/tenant-id/groups/groupId3").respond({result:n[2]}),e.when("GET",t+"/v1/tenants/tenant-id/groups").respond({result:[n[0],n[1],n[2]]}),e.when("POST",t+"/v1/tenants/tenant-id/groups").respond({result:n[3]}),e.when("GET",t+"/v1/groups/groupId0").respond(404)}]),angular.module("liveopsConfigPanel.shared.services").factory("Group",["LiveopsResourceFactory","apiHostname","cacheAddInterceptor","emitInterceptor",function(e,t,n,r){var o=e.create({endpoint:t+"/v1/tenants/:tenantId/groups/:id",resourceName:"Group",updateFields:[{name:"name"},{name:"description",optional:!0},{name:"owner"},{name:"active",optional:!0}],saveInterceptor:[n,r],updateInterceptor:r});return o.prototype.getDisplay=function(){return this.name},o}]),angular.module("liveopsConfigPanel.tenant.permission.mock",["liveopsConfigPanel.mock"]).service("mockTenantPermissions",function(e){return[new e({id:"permissionId1",name:"PERMISSION_1",tenantId:"tenant-id"}),new e({id:"permissionId2",name:"PERMISSION_2",tenantId:"tenant-id"}),new e({id:"permissionId3",name:"PERMISSION_3",tenantId:"tenant-id"})]}).run(["$httpBackend","apiHostname","mockTenantPermissions",function(e,t,n){e.when("GET",t+"/v1/tenants/tenant-id/permissions").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/permissionId1").respond({result:n[0]}),e.when("GET",t+"/v1/tenants/tenant-id/permissionId2").respond({result:n[1]}),e.when("GET",t+"/v1/tenants/tenant-id/permissionId3").respond({result:n[2]})}]).service("mockPlatformPermissions",function(e){return[new e({id:"permissionId1",name:"PLATFORM_PERMISSION_1"}),new e({id:"permissionId2",name:"PLATFORM_PERMISSION_1"})]}).run(["$httpBackend","apiHostname","mockPlatformPermissions",function(e,t,n){e.when("GET",t+"/v1/permissions").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/permissions/permissionId1").respond({result:n[0]}),e.when("GET",t+"/v1/permissions/permissionId2").respond({result:n[1]})}]),angular.module("liveopsConfigPanel.shared.services").factory("PlatformPermission",["LiveopsResourceFactory","apiHostname",function(e,t){var n=e.create({endpoint:t+"/v1/permissions/:id",resourceName:"PlatformPermission",updateFields:[]});return n.prototype.getDisplay=function(){return this.name},n}]),angular.module("liveopsConfigPanel.shared.services").factory("PlatformRole",["LiveopsResourceFactory","apiHostname",function(e,t){var n=e.create({endpoint:t+"/v1/roles:id",resourceName:"PlatformRole",updateFields:[{name:"name"},{name:"description",optional:!0},{name:"permissions",optional:!0}]});return n.prototype.getDisplay=function(){return this.name},n.getName=function(e){return n.cachedGet({id:e}).name},n}]),angular.module("liveopsConfigPanel.tenant.role.mock",["liveopsConfigPanel.mock"]).service("mockRoles",function(e){return[new e({id:"roleId1",name:"roleName1",tenantId:"tenant-id",permissions:[]}),new e({id:"roleId2",name:"roleName2",tenantId:"tenant-id",permissions:[]}),new e({id:"roleId3",name:"roleName3",description:"Does not exist yet!",tenantId:"tenant-id",permissions:[]})]}).run(["$httpBackend","apiHostname","mockRoles",function(e,t,n){e.when("GET",t+"/v1/tenants/tenant-id/roles").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/roles/roleId1").respond({result:n[0]}),e.when("GET",t+"/v1/tenants/tenant-id/roles/roleId2").respond({result:n[1]})}]).service("mockPlatformRoles",function(e){return[new e({id:"roleId1",name:"roleName1",permissions:[]}),new e({id:"roleId2",name:"roleName2",permissions:[]})]}).run(["$httpBackend","apiHostname","mockPlatformRoles",function(e,t,n){e.when("GET",t+"/v1/roles").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/roles/roleId1").respond({result:n[0]}),e.when("GET",t+"/v1/roles/roleId2").respond({result:n[1]})}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantPermission",["LiveopsResourceFactory","apiHostname",function(e,t){var n=e.create({endpoint:t+"/v1/tenants/:tenantId/permissions/:id",resourceName:"TenantPermission",updateFields:[]});return n.prototype.getDisplay=function(){return this.name},n}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantRole",["LiveopsResourceFactory","apiHostname","Session","cacheAddInterceptor","emitInterceptor",function(e,t,n,r,o){var i=e.create({endpoint:t+"/v1/tenants/:tenantId/roles/:id",resourceName:"TenantRole",updateFields:[{name:"name"},{name:"description",optional:!0},{name:"permissions"}],saveInterceptor:[r,o]});return i.prototype.getDisplay=function(){return this.name},i.getName=function(e){return i.cachedGet({tenantId:n.tenant.tenantId,id:e}).name},i}]),angular.module("liveopsConfigPanel.tenant.skill.mock",["liveopsConfigPanel.mock"]).service("mockSkills",function(e){return[new e({id:"skillId1",name:"skillName1",tenantId:"tenant-id",hasProficiency:!0}),new e({id:"skillId2",name:"skillName2",tenantId:"tenant-id",hasProficiency:!1}),new e({id:"skillId3",name:"skillName3",description:"Does not exist yet!",tenantId:"tenant-id",hasProficiency:!1})]}).service("mockUserSkills",function(e){return[new e({skillId:"skillId1",tenantId:"tenant-id",userId:"userId1",proficiency:0}),new e({skillId:"skillId1",tenantId:"tenant-id",userId:"userId2",proficiency:5}),new e({skillId:"skillId2",tenantId:"tenant-id",userId:"userId1",proficiency:8}),new e({skillId:"skillId3",tenantId:"tenant-id",userId:"userId2",proficiency:10})]}).service("mockSkillUsers",function(e){return[new e({userId:"userId1",proficiency:0}),new e({userId:"userId2",proficiency:5}),new e({userId:"userId1",proficiency:8}),new e({userId:"userId2",proficiency:10})]}).run(["$httpBackend","apiHostname","mockSkills","mockUserSkills","mockSkillUsers",function(e,t,n,r,o){e.when("GET",t+"/v1/tenants/tenant-id/skills").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/skills/skillId1").respond({result:n[0]}),e.when("GET",t+"/v1/tenants/tenant-id/skills/skillId2").respond({result:n[1]}),e.when("GET",t+"/v1/tenants/tenant-id/users/userId1/skills").respond({result:[r[0],r[2]]}),e.when("GET",t+"/v1/tenants/tenant-id/users/userId2/skills").respond({result:[r[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/skills/skillId1/users").respond({result:[o[0],o[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/skills/skillId2/users").respond({result:[o[2]]}),e.when("POST",t+"/v1/tenants/tenant-id/skills").respond({result:n[2]}),e.when("POST",t+"/v1/tenants/tenant-id/users/userId1/skills").respond({result:r[2]}),e.when("DELETE",t+"/v1/tenants/tenant-id/users/userId1/skills/skillId1").respond(200),e.when("PUT",t+"/v1/tenants/tenant-id/users/userId1/skills/skillId1").respond({result:r[0]})}]),angular.module("liveopsConfigPanel.shared.services").factory("Skill",["LiveopsResourceFactory","apiHostname","cacheAddInterceptor","emitInterceptor",function(e,t,n,r){var o=e.create({endpoint:t+"/v1/tenants/:tenantId/skills/:id",resourceName:"Skill",updateFields:[{name:"name"},{name:"description",optional:!0},{name:"hasProficiency"},{name:"active",optional:!0}],saveInterceptor:[n,r],updateInterceptor:r});return o.prototype.getDisplay=function(){return this.name},o}]),angular.module("liveopsConfigPanel.shared.services").service("tenantUserTransformer",["User","TenantRole","Session",function(e,t,n){var r=function(e,t,n){e[n]=e[t],delete e[t]},o=function(e,t,n){e.$user[n?n:t]=e[t],delete e[t]},i=function(e,t){e.$user[t]=e[t]};this.transform=function(s){s.$user=new e,s.userId&&r(s,"userId","id"),o(s,"firstName"),o(s,"lastName"),o(s,"externalId"),o(s,"personalTelephone"),o(s,"platformStatus","status"),i(s,"id"),i(s,"email"),r(s,"groups","$groups"),r(s,"skills","$skills"),s.roleName?r(s,"roleName","$roleName"):s.$roleName=t.getName(s.roleId),s.tenantId=n.tenant.tenantId,s.$user.$original=angular.copy(s.$user)}}]).service("tenantUserInterceptor",["tenantUserTransformer",function(e){this.response=function(t){var n=t.resource;return e.transform(n),n}}]).service("tenantUserQueryInterceptor",["tenantUserTransformer",function(e){this.response=function(t){return angular.forEach(t.resource,function(t){e.transform(t)}),t.resource}}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantUser",["LiveopsResourceFactory","apiHostname","tenantUserInterceptor","tenantUserQueryInterceptor","cacheAddInterceptor",function(e,t,n,r,o){var i=e.create({endpoint:t+"/v1/tenants/:tenantId/users/:id",resourceName:"TenantUser",updateFields:[{name:"status"},{name:"roleId"},{name:"extensions"}],getInterceptor:n,queryInterceptor:r,saveInterceptor:[n,o],updateInterceptor:n});i.prototype.getDisplay=function(){return this.$user?this.$user.getDisplay():void 0};var s=i.prototype.reset;return i.prototype.reset=function(){s.call(this),this.$user.reset()},i.prototype.isNew=function(){return!this.id},i}]),angular.module("liveopsConfigPanel.tenant.user.mock",["liveopsConfigPanel.mock","liveopsConfigPanel.tenant.role.mock"]).service("mockTenantUsers",function(e){return[new e({id:"userId1",status:"pending",externalId:73795,lastName:"Lowe",firstName:"Munoz",email:"munoz.lowe@hivedom.org",tenantId:"tenant-id",roleName:"roleName1",roleId:"roleId1",skills:[],groups:[]}),new e({id:"userId2",status:"enabled",externalId:80232,lastName:"Oliver",firstName:"Michael",email:"michael.oliver@ezent.io",tenantId:"tenant-id",roleName:"roleName1",roleId:"roleId1",skills:[],groups:[]}),new e({email:"test1@bluespurs.com",createdBy:"userId1",personalTelephone:null,platformStatus:"pending",firstName:"test",created:"2015-08-19T13:25:13Z",state:"offline",extension:"ca027450_4673_11e5_bded_621c6d9e2761",$skills:[],externalId:"56789",status:"invited",id:"userId100",lastName:"1",groups:[{tenantId:"tenant-id",memberId:"userId1",groupId:"groupId1",added:"2015-08-19T13:25:13Z",memberType:"user",name:"everyone",ower:"userId1",description:"everyone group"}],roleId:"roleId1"}),new e({tenantId:"tenantId",email:"test1@bluespurs.com",createdBy:"userId1",sessionReason:null,invitationExpiryDate:"2015-08-20T13:36:11Z",updated:null,created:"2015-08-19T13:36:11Z",state:"offline",extension:"41903310_4677_11e5_bded_621c6d9e2761",updatedBy:null,status:"invited",userId:"userId100",sessionStarted:"2015-08-19T13:36:11Z",roleId:"roleId1"})]}).run(["$httpBackend","apiHostname","mockTenantUsers",function(e,t,n){e.when("GET",t+"/v1/tenants/tenant-id/users/userId1").respond({result:n[0]}),e.when("GET",t+"/v1/tenants/tenant-id/users/userId2").respond({result:n[1]}),e.when("GET",t+"/v1/tenants/tenant-id/users/userId100").respond({result:n[2]}),e.when("GET",t+"/v1/tenants/tenant-id/users").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/userId").respond(404),e.when("POST",t+"/v1/tenants/tenant-id/users").respond(n[3])}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantGroupUsers",["LiveopsResourceFactory","apiHostname",function(e,t){return e.create({endpoint:t+"/v1/tenants/:tenantId/groups/:groupId/users/:memberId",resourceName:"TenantGroupUser",requestUrlFields:{tenantId:"@tenantId",groupId:"@groupId",memberId:"@memberId"}})}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantUserGroups",["LiveopsResourceFactory","apiHostname",function(e,t){return e.create({endpoint:t+"/v1/tenants/:tenantId/users/:memberId/groups",resourceName:"TenantUserGroup",requestUrlFields:{tenantId:"@tenantId",memberId:"@memberId"}})}]),angular.module("liveopsConfigPanel.tenant.user.group.mock",["liveopsConfigPanel.mock"]).service("mockGroupUsers",function(e){return[new e({groupId:"groupId1",memberId:"userId1",tenantId:"tenant-id"}),new e({groupId:"groupId2",memberId:"userId1",tenantId:"tenant-id"}),new e({groupId:"groupId1",memberId:"userId2",tenantId:"tenant-id"})]}).service("mockUserGroups",function(e){return[new e({groupId:"groupId1",memberId:"userId1",tenantId:"tenant-id"}),new e({groupId:"groupId2",memberId:"userId1",tenantId:"tenant-id"}),new e({groupId:"groupId1",memberId:"userId2",tenantId:"tenant-id"})]}).run(["$httpBackend","apiHostname","mockGroups","mockGroupUsers","mockUserGroups","Session",function(e,t,n,r,o,i){i.tenant.tenantId="tenant-id",e.when("POST",t+"/v1/tenants/tenant-id/groups/groupId1/users",{userId:"userId1"}).respond(200,o[1]),e.when("POST",t+"/v1/tenants/tenant-id/groups/groupId2/users",{userId:"userId1"}).respond(200,o[1]),e.when("DELETE",t+"/v1/tenants/tenant-id/groups/groupId1/users/userId1").respond(200),e.when("DELETE",t+"/v1/tenants/tenant-id/groups/groupId1/users/userId2").respond(200),e.when("GET",t+"/v1/tenants/tenant-id/users/userId1/groups").respond({result:[o[0],o[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/users/userId2/groups").respond({result:[o[2]]}),e.when("GET",t+"/v1/tenants/tenant-id/groups/groupId1/users").respond({result:[r[0],r[2]]}),e.when("GET",t+"/v1/tenants/tenant-id/groups/groupId2/users").respond({result:[r[1]]}),e.when("GET",t+"/v1/tenants/tenant-id/groups/groupId3/users").respond({result:[]})}]),angular.module("liveopsConfigPanel.shared.services").service("removeDefaultProficiencyInterceptor",["queryCache","Skill","Session","filterFilter",function(e,t,n,r){this.response=function(e){var o=e.resource.skillId;return t.cachedQuery({tenantId:n.tenant.tenantId}).$promise.then(function(t){var n=r(t,{id:o},!0);n.length>0&&(n[0].hasProficiency||delete e.resource.proficiency)}),e.resource}}]),angular.module("liveopsConfigPanel.shared.services").service("setSkillNameInterceptor",["queryCache","Skill","Session","filterFilter",function(e,t,n,r){this.response=function(e){var o=e.resource.skillId;return t.cachedQuery({tenantId:n.tenant.tenantId}).$promise.then(function(t){var n=r(t,{id:o},!0);n.length>0&&(e.resource.name=n[0].name)}),e.resource}}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantSkillUser",["LiveopsResourceFactory","apiHostname",function(e,t){return e.create({endpoint:t+"/v1/tenants/:tenantId/skills/:skillId/users/:userId",resourceName:"TenantSkillUser"})}]),angular.module("liveopsConfigPanel.shared.services").factory("TenantUserSkill",["LiveopsResourceFactory","apiHostname","emitInterceptor","cacheAddInterceptor","userSkillCacheRemoveInterceptor","setSkillNameInterceptor","removeDefaultProficiencyInterceptor",function(e,t,n,r,o,i,s){var a=e.create({endpoint:t+"/v1/tenants/:tenantId/users/:userId/skills/:skillId",resourceName:"TenantUserSkill",updateFields:[{name:"proficiency"}],requestUrlFields:{tenantId:"@tenantId",userId:"@userId",skillId:"@id"},saveInterceptor:[n,i,s,r],updateInterceptor:[n,i],deleteInterceptor:o});return a.prototype.cacheKey=function(){return"TenantUserSkill"+this.userId},a}]),angular.module("liveopsConfigPanel.shared.services").service("userSkillCacheRemoveInterceptor",["queryCache","filterFilter",function(e,t){this.response=function(n){if(angular.isDefined(n.resource.cacheKey())){var r=n.resource.cacheKey();if(e.get(r)){var o=t(e.get(r),{skillId:n.resource.skillId},!0);o.length>0&&e.get(r).removeItem(o[0])}}return n.resource}}]),angular.module("liveopsConfigPanel.shared.services").factory("User",["LiveopsResourceFactory","apiHostname","cacheAddInterceptor","emitInterceptor","userUpdateTransformer",function(e,t,n,r,o){var i=e.create({endpoint:t+"/v1/users/:id",resourceName:"User",updateFields:[{name:"firstName",optional:!0},{name:"lastName",optional:!0},{name:"password"},{name:"externalId",optional:!0},{name:"personalTelephone",optional:!0}],saveInterceptor:[n,r],updateInterceptor:r,putRequestTransformer:o});return i.prototype.getDisplay=function(){if(this.firstName||this.lastName){var e=(this.firstName?this.firstName:"")+" "+(this.lastName?this.lastName:"");return e.trim()}return this.email},i}]).service("userUpdateTransformer",["Session",function(e){return function(t){return e.isAuthenticated()&&t.id!==e.user.id||(delete t.status,delete t.roleId),t}}]),angular.module("liveopsConfigPanel.user.mock",["liveopsConfigPanel.mock"]).service("mockUsers",function(e){return[new e({id:"userId1",status:"disabled",externalId:73795,lastName:"Lowe",firstName:"Munoz",email:"munoz.lowe@hivedom.org"}),new e({id:"userId2",status:"enabled",externalId:80232,lastName:"Oliver",firstName:"Michael",email:"michael.oliver@ezent.io"}),new e({id:"userId100",status:"enabled",externalId:80233,lastName:"Moon",firstName:"Jackie",email:"jackie.moon@liveops.com",displayName:"Jackie Moon"})]}).run(["$httpBackend","apiHostname","mockUsers",function(e,t,n){e.when("GET",t+"/v1/users/userId1?tenantId=tenant-id").respond({result:n[0]}),e.when("GET",t+"/v1/users/userId2?tenantId=tenant-id").respond({result:n[1]}),e.when("GET",t+"/v1/users/userId100?tenantId=tenant-id").respond({result:n[2]}),e.when("GET",t+"/v1/users?tenantId=tenant-id").respond({result:n}),e.when("GET",t+"/v1/users").respond({result:[n[0],n[1]]}),e.when("GET",t+"/v1/users/userId0?tenantId=tenant-id").respond(404),e.when("POST",t+"/v1/users").respond(n[2])}]);